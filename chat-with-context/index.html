<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Chat with context dev</title>
    <meta name="description" content="Chat with context development page" />
    <link rel="icon" type="image/png" href="./demo/sib-logo.png" />

    <script type="module" src="./src/chat-with-context.tsx"></script>
    <!-- <link href="./src/style.css" rel="stylesheet" /> -->
    <link href="./demo/style.css" rel="stylesheet" />
  </head>

  <body>
    <div class="flex flex-col h-screen w-full">
      <!-- <div style="display: flex; flex-direction: column; height: 100vh; width: 100%;"> -->
      <nav class="flex justify-end">
        <!-- <button
          title="Switch theme"
          id="theme-switch-btn"
          class="px-4 py-2 rounded-lg hover:bg-gray-300 dark:hover:bg-slate-500 align-middle"
            >
          <span id="sun-icon">‚òÄÔ∏è</span>
          <span id="moon-icon" class="hidden">üåô</span>
        </button> -->
        <a
          href="https://github.com/sib-swiss/sparql-llm"
          target="_blank"
          rel="noopener noreferrer"
          class="text-black hover:text-black dark:text-white align-middle"
        >
          <button
            title="Source code on GitHub"
            class="px-4 py-2 m-1 rounded-lg hover:bg-gray-300 dark:hover:bg-slate-500"
          >
            <img src="./demo/github.svg" alt="GitHub logo" />
          </button>
        </a>
      </nav>

      <div class="text-left text-sm mb-5 prose max-w-3xl mx-auto pb-5 border-b">
        <h2 class="text-xl text-center font-semibold border-b pb-2">
          Ask Expasy
          <div
            class="inline-block ml-3 px-3 py-1 bg-red-600 text-white text-sm font-semibold rounded-full justify-center items-center"
          >
            Beta
          </div>
        </h2>
        <p>
          <strong>ExpasyGPT</strong> is reshaping how researchers explore life science data, streamlining searches
          across the <a href="https://www.sib.swiss/">SIB Swiss Institute of Bioinformatics</a>‚Äô databases (learn more
          <a href="/about-chat">here</a>). This AI-driven tool is powered by metadata and example queries from SPARQL
          endpoints like:
        </p>
        <ul style="list-style: inside">
          <li>
            <a href="http://www.uniprot.org/uniprot/" target="_blank">UniProt</a>, an expertly curated database of
            proteins
          </li>
          <li><a href="https://omabrowser.org/oma/home/" target="_blank">OMA</a>, the orthologous matrix</li>
          <li>
            <a href="https://www.bgee.org/" target="_blank">Bgee</a>, an expertly curated gene expression database
          </li>
          <li>
            <a href="https://www.rhea-db.org/" target="_blank">Rhea</a>, an expertly curated database of biochemical
            reactions
          </li>
          <li>
            <a href="http://www.swisslipids.org/#/" target="_blank">SwissLipids</a>, an expertly curated database of
            lipids.
          </li>
        </ul>
        <p>
          As the service evolves, it will integrate additional endpoints from the
          <a href="/search/SPARQL" target="_blank">SIB Knowledge Graph</a>.
        </p>
        <p>
          <strong>We value your input!</strong> For any questions or suggestions, feel free to reach out to the
          <a href="/contact" target="_blank">Expasy helpdesk</a>.
        </p>
      </div>

      <div class="flex-grow mx-5">
        <!-- chat-endpoint="https://chat.expasy.org/chat" -->
        <!-- chat-endpoint="http://localhost:8000/chat" -->
        <chat-with-context
          chat-endpoint="http://localhost:8000/chat"
          feedback-endpoint="http://localhost:8000/feedback"
          api-key="%CHAT_API_KEY%"
          model="openai/gpt-4o-mini"
          examples="Which resources are available at the SIB?,How can I get the HGNC symbol for the protein P68871?,What are the rat orthologs of the human TP53?,Where is expressed the gene ACE2 in human?,Anatomical entities where the INS zebrafish gene is expressed and its gene GO annotations,List the genes in primates orthologous to genes expressed in the fruit fly eye"
        ></chat-with-context>
      </div>
    </div>
  </body>

  <!-- <script>
    // TODO: dark mode in tailwind seems broken

    // Light/dark theme setup, default to dark if nothing found
    const sunIcon = document.getElementById("sun-icon");
    const moonIcon = document.getElementById("moon-icon");
    function toggleIcons() {
      if (document.documentElement.classList.contains("dark")) {
        sunIcon.classList.remove("hidden");
        moonIcon.classList.add("hidden");
      } else {
        sunIcon.classList.add("hidden");
        moonIcon.classList.remove("hidden");
      }
    }
    toggleIcons();
    const themeSwitchBtn = document.getElementById("theme-switch-btn");
    function toggleDarkMode() {
      const doc = document.documentElement;
      doc.classList.toggle("dark");
      toggleIcons();
    }
    themeSwitchBtn.addEventListener("click", toggleDarkMode);
    let prefersDark = true;
    if (window.matchMedia) prefersDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
    // if (prefersDark) document.documentElement.classList.toggle('dark', prefersDark);
    // if (prefersDark) toggleDarkMode();
  </script> -->
</html>
